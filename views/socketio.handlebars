<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" const="text/html;charset=UTF-8" name="viewport" content="width=device-width, initial-scale=1.0"/>

      <!-- Materialize -->
    <!-- <link rel="stylesheet" href="./assets/css/materialize.min.css" /> -->
    <link rel="stylesheet" href="./assets/css/materialize.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
     <!-- Materialize js-->
    <script type="text/javascript" src="./assets/js/materialize.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3&sensor=false&libraries=geometry"></script>
<!-- jQuery -->
     <script
     type="text/javascript"
     src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
   ></script>

   <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Dancing+Script|Rajdhani|Rokkitt&display=swap"
      rel="stylesheet"
    />

     <!-- Icon -->
    <link
      rel="icon"
      type="image/png"
      href="./assets/images/globe-icon.png"
    />

  <!-- Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>

<!-- Emoji -->
    <link rel="stylesheet" href="./assets/css/emojionearea.min.css">
    <script type="text/javascript" src="./assets/js/emojionearea.min.js"></script>
    
  {{!-- stylesheet --}}
    <link rel="stylesheet" type="text/css" href="/assets/css/stylesocketio.css" >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <title>Intouch Chat</title>
  </head>

  <body>
  
  {{!-- container start --}}
  <div class="frontContainer">

<!-- Navigation Bar -->
      <div class="navBar">

          <!-- Left-side Menu options -->
          <div class="homeMenu">
                <span id = "home" class="homeNav">Home</span>
                <span id = "homeFAQ" class="homeNav">FAQ</span>
                <span id = "homeTeam" class="homeNav">Team</span>
                <span id = "homeContact" class="homeNav">Contact</span>
          </div>
        
        <!-- Page Logo -->
        <div class="logoDiv">
          <span class="title">inTouch</span>
        </div>

        <!-- Right-side Menu options -->
        <div class="burgerDiv">
          
    
          <a class="navOpt map" 
            ><i class="navBtn">Navigate</i></a
          >
          <a data-target="slide-out" class="sidenav-trigger navOpt" 
            ><i class="navBtn profile">Profile</i></a
          >
          <a class="navOpt friends"
            ><i class="navBtn" >Friends</i></a
          >
          
          <a data-target="dropdown1" class="navOpt settings dropdown-trigger"
            ><i class="navBtn" >Settings</i></a
          ></li>
          
          <ul id="dropdown1" class="dropdown-content">
              <li><a href="#!">one</a></li>
              <li><a href="#!">two</a></li>
              <li class="divider"></li>
              <li><a href="#!">three</a></li>
            </ul>
          
          <!-- Burger-menu button -->
          <img src="./assets/images/burgerblue.png" id="goto" class="navBtn"
          width="50px" height="50px" / data-state="still"
          data-open="./assets/images/burgeropen.gif"
          data-close="./assets/images/burgerclose.gif">
        </div>
      </div>
      <!-- Navigation Bar End -->

      <!-- Profile Side Nav -->
      <ul id="slide-out" class="sidenav">
        <li>
          <div class="user-view">
            <div class="background">
              <img src="./assets/images/lensright1.png" height="100%" width="110%" />
            </div>
            <a href="#user"><img class="circle" src="./assets/images/userPics/catuser.jpg"/></a>
            <a href="#name"><span class="white-text name">El Gato</span></a>
            <a href="#email"
              ><span class="white-text email">el_gato@gmail.com</span></a
            >
          </div>
        </li>
        <li><a class="subheader">Parent Profile</a></li>
        <li><a class="waves-effect" href="#!">First Spot Link</a></li>
        <li><a class="waves-effect" href="#!">Second Spot Link</a></li>
        <li><a class="waves-effect" href="#!">Third Spot Link</a></li>
        <li><div class="divider"></div></li>
      </ul>
      {{!-- sidenav end --}}
 <!-- Pop-up Map -->
      <div id="map"></div>
 {{!-- chatDiv --}}
<div class="chatBox">
<section class="usernameDiv">
      <div id="change_username">
	<input id="username" type="text" placeholder="Username here..."/>
  
	<button id="send_username" type="button">Change username</button>
      </div>
    </section>
<div class="famDiv">
              <div class="scroll">
                  <ul class="famList">
                    <li class="member">
                        <a href="#user"><img class="circle userImg" src="./assets/images/userPics/catuser.jpg"/></a>
                    </li>
                    <li class="member">
                        <a href="#user"><img class="circle userImg" src="./assets/images/userPics/lioness.png"/></a>
                    </li>
                    <li class="member">
                        <a href="#user"><img class="circle userImg" src="./assets/images/userPics/tiger.png"/></a>
                    </li>
                    <li class="member">
                        <a href="#user"><img class="circle userImg" src="./assets/images/userPics/kitten.png"/></a>
                    </li>
                   
                  </ul>
                </div>
          </div>
    <section id="chatroom">
      <div id="roomTitle">Chats</div>
      <section id="feedback"></section>
    </section>

    <section id="input_zone"> 
      <input id="message" class="vertical-align" type="text" placeholder="Type a message..."/>
      <button class="btn waves-effect waves-light N/A transparent" name="action">
    {{!-- <i id="enlarge" class="material-icons left tiny">aspect_ratio</i> --}}
  </button>
      <button id="send_message" class="vertical-align" type="button">Send </button>
    </section>
</div>

<!-- Page Footer -->
        <div class="footer">
            <div class="searchDiv input-field">
                <i class="material-icons prefix">search</i>
                <input class="box" id="search" placeholder="Search here..." type="search"/>
            </div>
            <div class="time"></div>
            <div class="chatBtnDiv">
                <span class="new badge">4</span>
                <button class="chatBtn btn" name="action">Chat
                    <i class="material-icons right">chat</i>
                  </button>
                
            </div>
            
            <!-- <nav class="searchBar N/A transparent">
                <div class="nav-wrapper">
                  <form>
                    <div class="input-field">
                      <input id="search" type="search" required>
                      <label class="label-icon" for="search"><i class="material-icons">search</i></label>
                      <i class="material-icons">close</i>
                    </div>
                  </form>
                </div>
              </nav> -->
      </div>
    
      <!-- Footer End -->

  </div>
  {{!-- pagecontainer end --}}
 <!-- popup contact page -->
                <div class="slideContact">
                  <div class="contactWrap">
                      <a class="ctcClose">&times;</a>
                      <div class="greetDiv">
                        <h1 class="greeting">Let's keep <span class="intouch">inTouch!</span></h1>
                      </div>
                      <form class="fillup">
                            <input class="box" id="custName" placeholder="Name here...." type="text"/>
                            <input class="box" id="custEmail" placeholder="Email Address here...." type="text"/>
                            <br />
                            <label class="form">Message</label>
                            <br />
                            <textarea class="box" id="box3" placeholder="Type your message here..." onfocus="this.placeholder = ''"></textarea>
                            <br />  
                            <button class="btn waves-effect waves-light #00b0ff light-blue accent-3" type="submit" name="action">Submit
                                <i class="material-icons right">send</i>
                            </button>
                            <span class="sent"></span>
                            
                        </form>
                            <span id="ctc1" class="scontact" >
                            <h5>inTouch.com</h5>
                            Chicago, IL<br>
                            (773)555-5555<br><br>
                            inTouch@gmail.com
                            </span>
                  </div>
                  <div class="botfoot">
                    <div class="social">
                        <img
                          class="sclbtn"
                          id="git"
                          src="./assets/images/giticon.png"
                          width="30"
                          height="30"
                        />
                        <img
                          class="sclbtn"
                          id="insta"
                          src="./assets/images/instablack.png"
                          width="30"
                          height="30"
                        />
                        <img
                          class="sclbtn"
                          id="google"
                          src="./assets/images/gmail.png"
                          width="30"
                          height="31"
                        />
                      </div>
                      <span class="copyright">Â© 2019 Copyright: inTouch.com</span>
                     
                      <!-- Social Media buttons -->
                  
            </div>
                    
                  </div>
    


{{!-- javascript --}}
    <script>

      

    //auto execute function to start socketio
$(function(){
    //make connection
 var socket = io.connect('http://localhost:3500')

 //buttons and inputs
 var message = $("#message")
 var username = $("#username")
 var send_message = $("#send_message")
 var send_username = $("#send_username")
 var chatroom = $("#chatroom")
 var feedback = $("#feedback")

 //Emit message
 send_message.click(function(){
     socket.emit('new_message', {message : message.val()})
 })

 //Listen on new_message
 socket.on("new_message", (data) => {
     feedback.html('');
     message.val('');
     chatroom.append("<p class='message'>" + data.username + ": " + data.message + "</p>");
 })

 //Emit a username
 send_username.click(function(){
     socket.emit('change_username', {username : username.val()})
 })

 //Emit typing
 message.bind("keypress", () => {
   console.log("Someone typing")
     socket.emit('typing')
 })

 //Listen on typing
 socket.on('typing', (data) => {
   console.log("Listing to typing")
     feedback.html("<p><i>" + data.username + " is typing a message..." + "</i></p>")
 })
});
</script>
    
    
    
  </body>
</html>